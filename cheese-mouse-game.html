<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Multiplication Mouse Game</title>

<style>

  body {
    margin: 0;
    padding: 0;
    height: 100vh;

    display: flex;
    justify-content: center;
    align-items: center;

    background: linear-gradient(#fffde7, #e3f2fd);

    font-family:
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      "Apple Color Emoji",
      "Segoe UI Emoji",
      Arial,
      sans-serif;

    text-align: center;
  }

  #game {
    width: 100%;
    max-width: 500px;
    padding: 20px;
  }

  h1 {
    font-size: 28px;
    margin-bottom: 10px;
  }

  /* Path */

  #path {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 6px;
    margin: 20px 0;
  }

  .block {
    height: 45px;
    border-radius: 8px;
    background: #e0e0e0;

    display: flex;
    justify-content: center;
    align-items: center;

    font-size: 22px;
  }

  .mouse {
    background: #81c784;
  }

  .cheese {
    background: #ffd54f;
  }

  /* Question */

  #question {
    font-size: 36px;
    font-weight: bold;
    margin: 15px 0;
  }

  /* Input */

  input {
    font-size: 22px;
    padding: 10px;
    width: 120px;
    text-align: center;

    border-radius: 8px;
    border: 2px solid #4caf50;
  }

  button {
    font-size: 20px;
    padding: 10px 24px;

    border-radius: 10px;
    border: none;

    background: #4caf50;
    color: white;

    margin-left: 10px;

    cursor: pointer;
  }

  button:active {
    transform: scale(0.96);
  }

  #status {
    font-size: 20px;
    margin-top: 12px;
    min-height: 24px;
  }

</style>
</head>

<body>

<div id="game">

  <h1>üê≠ Math Mouse √ó üßÄ</h1>

  <!-- Path -->
  <div id="path"></div>

  <!-- Question -->
  <div id="question"></div>

  <!-- Answer -->
  <div>
    <input id="answerInput" type="number" inputmode="numeric" />
    <button id="checkBtn">‚úî Check</button>
  </div>

  <div id="status"></div>

</div>

<!-- Sounds -->
<audio id="jumpSound" src="jump.mp3" preload="auto"></audio>
<audio id="wrongSound" src="wrong.mp3" preload="auto"></audio>


<script>

/* ===============================
   SETTINGS
   =============================== */

const TOTAL_BLOCKS = 10;
const MAX_NUM = 12;


/* ===============================
   STATE
   =============================== */

let position = 0;

let num1 = 0;
let num2 = 0;
let correctAnswer = 0;


/* ===============================
   ELEMENTS
   =============================== */

const pathDiv = document.getElementById("path");
const questionDiv = document.getElementById("question");
const input = document.getElementById("answerInput");
const checkBtn = document.getElementById("checkBtn");
const statusDiv = document.getElementById("status");

const jumpSound = document.getElementById("jumpSound");
const wrongSound = document.getElementById("wrongSound");

checkBtn.addEventListener("click", checkAnswer);
input.addEventListener("keyup", e => {
  if (e.key === "Enter") checkAnswer();
});


/* ===============================
   SOUND
   =============================== */

function playSound(sound) {
  sound.pause();
  sound.currentTime = 0;

  requestAnimationFrame(() => {
    sound.play();
  });
}


/* ===============================
   PATH
   =============================== */

function buildPath() {

  pathDiv.innerHTML = "";

  for (let i = 0; i <= TOTAL_BLOCKS; i++) {

    const block = document.createElement("div");
    block.className = "block";

    if (i === position) {
      block.classList.add("mouse");
      block.textContent = "üê≠";
    }

    if (i === TOTAL_BLOCKS) {
      block.classList.add("cheese");
      block.textContent = "üßÄ";
    }

    pathDiv.appendChild(block);
  }
}


/* ===============================
   QUESTION
   =============================== */

function randomNum() {
  return Math.floor(Math.random() * MAX_NUM) + 1;
}


function newQuestion() {

  num1 = randomNum();
  num2 = randomNum();

  correctAnswer = num1 * num2;

  questionDiv.textContent =
    `${num1} √ó ${num2} = ?`;

  input.value = "";
  input.focus();

  statusDiv.textContent = "";
}


/* ===============================
   MOVEMENT
   =============================== */

function moveForward() {

  if (position < TOTAL_BLOCKS) {
    position++;
    buildPath();
    playSound(jumpSound);
  }
}


function moveBackward() {

  if (position > 0) {
    position--;
    buildPath();
    playSound(wrongSound);
  }
}


/* ===============================
   CHECK ANSWER
   =============================== */

function checkAnswer() {

  const userAnswer = Number(input.value);

  if (input.value === "") return;


  /* CORRECT */

  if (userAnswer === correctAnswer) {

    moveForward();

    statusDiv.textContent = "‚úÖ Correct!";

  }

  /* WRONG */

  else {

    moveBackward();

    statusDiv.textContent =
      `‚ùå Wrong! Answer is ${correctAnswer}`;
  }


  /* WIN */

  if (position === TOTAL_BLOCKS) {

    questionDiv.textContent = "üéâ YOU WIN! üéâ";

    statusDiv.textContent = "Mouse got the cheese! üßÄ";

    input.disabled = true;
    checkBtn.disabled = true;

    return;
  }


  /* NEXT */

  setTimeout(newQuestion, 1000);
}


/* ===============================
   START
   =============================== */

buildPath();
newQuestion();

</script>

</body>
</html>

